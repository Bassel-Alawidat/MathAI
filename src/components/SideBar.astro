---
import SideBarFooter from "./SideBarFooter.astro";
import { Image } from "astro:assets";
import SideBarMenu from "./SideBarMenu.astro";
const { sideBarActiveItemID } = Astro.props;
---

<div class="drawer-side z-50">
  <label for="my-drawer" class="drawer-overlay"></label>
  <aside class="px-4 pt-4 h-auto min-h-full w-[20rem] bg-gradient-to-b from-blue-950 via-blue-900 to-blue-800 text-white shadow-2xl rounded-r-3xl backdrop-blur-lg bg-opacity-90 flex flex-col border-r border-white/10">

    <!-- الصورة الشخصية -->
    <div class="w-fit mx-auto mt-6 mb-8">
      <a href="/" class="group relative block w-fit mx-auto">
        <div class="avatar transition-transform duration-500 ease-in-out group-hover:scale-105 group-hover:rotate-3 drop-shadow-xl">
          <div class="w-[9rem] rounded-full ring-4 ring-cyan-400/60 ring-offset-4 ring-offset-blue-900 relative overflow-hidden">
            <Image
              class="rounded-full transition-all duration-500 group-hover:scale-110 group-hover:rotate-[6deg] shadow-lg"
              format="webp"
              width={300}
              height={300}
              src="/profileg.png"
              alt="Profile image"
            />
            <!-- لمعة تمر على الصورة -->
            <div class="absolute inset-0 pointer-events-none">
              <div class="absolute top-0 left-[-75%] w-[150%] h-full bg-gradient-to-r from-transparent via-white/30 to-transparent transform skew-x-[-20deg] opacity-0 group-hover:opacity-100 transition-opacity duration-700">
                <div class="w-full h-full animate-slide-glow"></div>
              </div>
            </div>
          </div>
        </div>
      </a>
    </div>
    <!-- القائمة -->
    <div class="flex-1">
      <SideBarMenu sideBarActiveItemID={sideBarActiveItemID} />
    </div>

    <!-- الفوتر -->
    <div class="mt-auto mb-4">
      <SideBarFooter />
    </div>
  </aside>
</div>

<style>
/* تحسين القائمة */
.menu a {
  transition: all 0.3s ease;
  border-radius: 0.75rem;
  padding-left: 1rem;
  padding-right: 1rem;
  font-weight: 500;
}

.menu a:hover {
  background: linear-gradient(to right, #00c6ff33, #0072ff33);
  color: #ffffff;
  transform: translateX(5px);
  font-weight: bold;
}

.menu a.active {
  background-color: #2563eb;
  color: white;
  font-weight: bold;
  box-shadow: inset 0 0 0 2px #93c5fd55;
}

@keyframes slide-glow {
  0% {
    transform: translateX(-100%);
  }
  60% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-slide-glow {
  animation: slide-glow 2.5s ease-in-out infinite;
}
</style>
